# <font style="color:rgb(38, 218, 38);">完成事项</font>

# 关于汇编中的寄存器

- 寄存器通常有两个字母为简写

## 1.1 通用（数据）寄存器

1. **AX  - 累加寄存器**
   
   - **主要功能**：用于算术和逻辑运算的**主寄存器**。很多指令（如`MUL`, `DIV`, `IN`, `OUT`）都默认使用它。
   * **在乘法/除法中**：通常存放一个操作数，结果也常放在`AX`（或与`DX`组合）。

2. **BX  - 基址寄存器**
   
   * **主要功能**：
     
     1. **作为数据指针**：在间接寻址（如 `[BX]`）或基址寻址（如 `[BX+SI]`）中，存放数据的**内存偏移地址**。这是它与AX、CX、DX最显著的区别之一。
     
     2. 也可以像AX一样用作通用数据存储。

3. **CX  - 计数寄存器**
   
   * **主要功能**：
     
     1. **循环计数**：在`LOOP`指令中自动充当计数器（`CX = CX - 1`，然后判断是否为0）。
     
     2. **重复操作计数**：在字符串操作指令（如`REP MOVSB`）中，指定重复次数。
     
     3. **移位计数**：在部分移位/循环移位指令中，指定移位的位数。

4. **DX  - 数据寄存器**
   
   * **主要功能**：
     
     1. **辅助AX进行乘除法**：在32位乘除法中，与AX组合形成32位操作数（`DX:AX`）。
        
        - 乘法：`(DX:AX) = AX * 源操作数`
        * 除法：`(DX:AX) / 源操作数`，商在AX，余数在DX。
     
     2. **I/O操作**：在端口寻址的I/O指令中，存放端口地址（当端口号大于FFh时）。

## 1.2 拆分

- 只有上述四个通用寄存器可以拆分为两个可以单独使用的8位寄存器来用
  
  - AX---AH和AL
  
  - BX---BH和BL
  
  - CX---XH和CL
  
  - DX---DH和DL

在单个通用寄存器的16位中，前八位为高8位，后八位为低8位
                     AX                   AH为高八位    AL为低八位
    数据大小 AX:20000       AH:78              AL:32

### 总结表

| 寄存器     | 16位名 | 主要传统用途                | 扩展名 (32位) | 扩展名 (64位) |
| ------- | ---- | --------------------- | --------- | --------- |
| **累加器** | AX   | 算术运算主寄存器、函数返回值、I/O操作  | EAX       | RAX       |
| **基址**  | BX   | **内存寻址**（存放偏移地址）、通用数据 | EBX       | RBX       |
| **计数**  | CX   | **循环/重复计数器**、移位计数     | ECX       | RCX       |
| **数据**  | DX   | 辅助AX乘除法、大端口号I/O       | EDX       | RDX       |

## 2.1 段寄存器

### 1. **CS - 代码段寄存器**

* **用途**：存放当前正在执行的 **程序代码** 所在段的**段基址**。

* **CPU工作方式**：CPU要取指令时，会自动使用 `CS:IP` 来计算出物理地址：
  
  * **物理地址 = (CS × 16) + IP**
  
  * `IP` (Instruction Pointer) 是指令指针，存放下一条要执行指令的**偏移地址**。

* **重要性**：程序运行时，CS通常由操作系统或加载器设置，**不能通过`MOV`指令直接修改**（只能通过`JMP`, `CALL`, `RET`, `INT`等跳转指令间接改变）。

### 2. **DS - 数据段寄存器**

* **用途**：存放程序 **默认数据段** 的段基址。

* **CPU工作方式**：当指令访问内存数据（如 `MOV AX, [BX]`）时，如果没有特别指定段，CPU默认使用 `DS` 作为段基址来计算物理地址：
  
  * **物理地址 = (DS × 16) + 偏移地址**

* **编程注意**：程序开始通常需要初始化DS，使其指向自己的数据区。

### 3. **SS - 堆栈段寄存器**

* **用途**：存放 **堆栈段** 的段基址。

* **CPU工作方式**：所有堆栈操作（`PUSH`, `POP`, `CALL`, `RET`）都默认使用 `SS:SP` 或 `SS:BP`：
  
  * **栈顶物理地址 = (SS × 16) + SP**
  
  * **栈底物理地址 = (SS × 16) + BP**

* **重要性**：`SP` (Stack Pointer) 指向当前栈顶，`BP` (Base Pointer) 常用于访问栈帧中的参数和局部变量。SS也需要在程序初始化时正确设置。

### 4. **ES - 附加段寄存器**

* **用途**：存放 **附加数据段** 的段基址。

* **使用场景**：
  
  1. **字符串操作**：作为目标操作数的段基址（如 `MOVSB` 指令从 `DS:SI` 复制到 `ES:DI`）。
  
  2. **需要额外数据段时**：当程序数据超过64KB（一个段的限制），需要用ES访问另一个数据段。

* **编程注意**：ES是一个“备用”段寄存器，当默认的DS不够用时使用。

## 3.1 指针寄存器

### 3. 指针寄存器

寻址方式


